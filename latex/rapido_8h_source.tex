\hypertarget{rapido_8h_source}{}\doxysection{rapido.\+h}
\label{rapido_8h_source}\index{include/rapido.h@{include/rapido.h}}
\mbox{\hyperlink{rapido_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#ifndef rapido\_h}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#define rapido\_h}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <stdbool.h>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <sys/socket.h>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}picotls.h"{}}}
\DoxyCodeLine{13 }
\DoxyCodeLine{14 \textcolor{keyword}{typedef} uint32\_t rapido\_connection\_id\_t;}
\DoxyCodeLine{15 \textcolor{keyword}{typedef} uint32\_t rapido\_stream\_id\_t;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define CLIENT\_STREAM(sid) (((sid)\&0x1) == 0)}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define SERVER\_STREAM(sid) (((sid)\&0x1) == 1)}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{keyword}{typedef} uint8\_t rapido\_address\_id\_t;}
\DoxyCodeLine{21 \textcolor{keyword}{typedef} uint64\_t set\_t;}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#define SET\_LEN 64}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#define SET\_HAS(bs, e) (bs \& (1ull << ((uint64\_t)e)))}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define SET\_ADD(bs, e) bs = (bs | (1ull << ((uint64\_t)e)))}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define SET\_REMOVE(bs, e) bs = (bs \& (\string~(1ull << ((uint64\_t)e))))}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#define SET\_SIZE(bs) \_\_builtin\_popcountll(bs)}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define TLS\_SESSION\_ID\_LEN 32}}
\DoxyCodeLine{30 }
\DoxyCodeLine{34 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{35     \textcolor{keywordtype}{size\_t} capacity;}
\DoxyCodeLine{36     \textcolor{keywordtype}{size\_t} size;}
\DoxyCodeLine{37     \textcolor{keywordtype}{size\_t} item\_size;}
\DoxyCodeLine{38     uint8\_t *data;}
\DoxyCodeLine{39 \} \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}};}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define rapido\_array\_iter(a, i, e, bl)                                                                                             \(\backslash\)}}
\DoxyCodeLine{42 \textcolor{preprocessor}{    do \{                                                                                                                           \(\backslash\)}}
\DoxyCodeLine{43 \textcolor{preprocessor}{        for (int i = 0; i < (a)-\/>capacity; i++) \{                                                                                  \(\backslash\)}}
\DoxyCodeLine{44 \textcolor{preprocessor}{            size\_t offset = (1 + (a)-\/>item\_size) * i;                                                                              \(\backslash\)}}
\DoxyCodeLine{45 \textcolor{preprocessor}{            if ((a)-\/>data[offset] == true) \{                                                                                       \(\backslash\)}}
\DoxyCodeLine{46 \textcolor{preprocessor}{                e = (void *)(a)-\/>data + offset + 1;                                                                                \(\backslash\)}}
\DoxyCodeLine{47 \textcolor{preprocessor}{                bl                                                                                                                 \(\backslash\)}}
\DoxyCodeLine{48 \textcolor{preprocessor}{            \}                                                                                                                      \(\backslash\)}}
\DoxyCodeLine{49 \textcolor{preprocessor}{        \}                                                                                                                          \(\backslash\)}}
\DoxyCodeLine{50 \textcolor{preprocessor}{    \} while (0)}}
\DoxyCodeLine{51 }
\DoxyCodeLine{55 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{56     \textcolor{keywordtype}{size\_t} capacity;}
\DoxyCodeLine{57     \textcolor{keywordtype}{size\_t} size;}
\DoxyCodeLine{58     \textcolor{keywordtype}{size\_t} front\_index;}
\DoxyCodeLine{59     \textcolor{keywordtype}{size\_t} back\_index;}
\DoxyCodeLine{60     \textcolor{keywordtype}{size\_t} item\_size;}
\DoxyCodeLine{61     uint8\_t *data;}
\DoxyCodeLine{62 \} \mbox{\hyperlink{structrapido__queue__t}{rapido\_queue\_t}};}
\DoxyCodeLine{63 }
\DoxyCodeLine{67 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{68     \textcolor{keywordtype}{size\_t} capacity;}
\DoxyCodeLine{69     \textcolor{keywordtype}{size\_t} size;}
\DoxyCodeLine{70     \textcolor{keywordtype}{size\_t} front\_index;}
\DoxyCodeLine{71     \textcolor{keywordtype}{size\_t} back\_index;}
\DoxyCodeLine{72     uint8\_t *data;}
\DoxyCodeLine{73 \} \mbox{\hyperlink{structrapido__buffer__t}{rapido\_buffer\_t}};}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \textcolor{preprocessor}{\#define RANGES\_LEN 64}}
\DoxyCodeLine{76 }
\DoxyCodeLine{78 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{79     \textcolor{keyword}{struct }\mbox{\hyperlink{structrapido__range__list__t_1_1rapido__range__item}{rapido\_range\_item}} \{}
\DoxyCodeLine{80         uint64\_t low;}
\DoxyCodeLine{81         uint64\_t high;}
\DoxyCodeLine{82     \} ranges[RANGES\_LEN];}
\DoxyCodeLine{83     \textcolor{keywordtype}{size\_t} size;}
\DoxyCodeLine{84 \} \mbox{\hyperlink{structrapido__range__list__t}{rapido\_range\_list\_t}};}
\DoxyCodeLine{85 }
\DoxyCodeLine{91 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{92     \textcolor{keyword}{struct }\{}
\DoxyCodeLine{93         \textcolor{keywordtype}{void} *data;}
\DoxyCodeLine{94         \textcolor{keywordtype}{size\_t} capacity;}
\DoxyCodeLine{95         \textcolor{keywordtype}{size\_t} offset;}
\DoxyCodeLine{96     \} buffer;}
\DoxyCodeLine{97     \mbox{\hyperlink{structrapido__range__list__t}{rapido\_range\_list\_t}} ranges;}
\DoxyCodeLine{98     \textcolor{keywordtype}{size\_t} read\_offset;}
\DoxyCodeLine{99 \} \mbox{\hyperlink{structrapido__range__buffer__t}{rapido\_range\_buffer\_t}};}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{keywordtype}{void} *\mbox{\hyperlink{rapido_8h_ab576f6e1b834023f1ef924a1964e948c}{rapido\_queue\_pop}}(\mbox{\hyperlink{structrapido__queue__t}{rapido\_queue\_t}} *queue);}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 \textcolor{preprocessor}{\#define rapido\_queue\_drain(q, e, bl)                                                                                               \(\backslash\)}}
\DoxyCodeLine{104 \textcolor{preprocessor}{    do \{                                                                                                                           \(\backslash\)}}
\DoxyCodeLine{105 \textcolor{preprocessor}{        while ((q)-\/>size) \{                                                                                                        \(\backslash\)}}
\DoxyCodeLine{106 \textcolor{preprocessor}{            e = rapido\_queue\_pop(q);                                                                                               \(\backslash\)}}
\DoxyCodeLine{107 \textcolor{preprocessor}{            bl                                                                                                                     \(\backslash\)}}
\DoxyCodeLine{108 \textcolor{preprocessor}{        \}                                                                                                                          \(\backslash\)}}
\DoxyCodeLine{109 \textcolor{preprocessor}{    \} while (0)}}
\DoxyCodeLine{110 }
\DoxyCodeLine{111 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{112     uint64\_t tls\_record\_sequence; \textcolor{comment}{// The TLS Record sequence number of this record}}
\DoxyCodeLine{113     \textcolor{keywordtype}{size\_t} ciphertext\_len;        \textcolor{comment}{// The total length of the record as transmitted on the wire}}
\DoxyCodeLine{114     \textcolor{keywordtype}{bool} ack\_eliciting;           \textcolor{comment}{// Whether receiving this record is expected to trigger the sending of an ACK. It also}}
\DoxyCodeLine{115                                   \textcolor{comment}{// implies that the sender of this record will retransmit the frames}}
\DoxyCodeLine{116     uint64\_t sent\_time;           \textcolor{comment}{// The time at which the record was sent}}
\DoxyCodeLine{117 \} \mbox{\hyperlink{structrapido__record__metadata__t}{rapido\_record\_metadata\_t}};}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{120     ptls\_context\_t *tls\_ctx;}
\DoxyCodeLine{121     \textcolor{keywordtype}{char} *server\_name;}
\DoxyCodeLine{122 }
\DoxyCodeLine{123     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} local\_addresses;}
\DoxyCodeLine{124     rapido\_address\_id\_t next\_local\_address\_id;}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} listen\_sockets;}
\DoxyCodeLine{127     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} pending\_connections;}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} sessions;}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{keywordtype}{bool} is\_server; \textcolor{comment}{// For QLOG macros}}
\DoxyCodeLine{132     \textcolor{keyword}{struct }\{}
\DoxyCodeLine{133         FILE *out;}
\DoxyCodeLine{134         uint64\_t reference\_time;}
\DoxyCodeLine{135     \} qlog;}
\DoxyCodeLine{136 \} \mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}};}
\DoxyCodeLine{137 }
\DoxyCodeLine{138 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{139     ptls\_t *tls;}
\DoxyCodeLine{140     ptls\_context\_t *tls\_ctx;}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} connections;}
\DoxyCodeLine{143     rapido\_connection\_id\_t next\_connection\_id;}
\DoxyCodeLine{144     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} streams;}
\DoxyCodeLine{145     rapido\_stream\_id\_t next\_stream\_id;}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} local\_addresses;}
\DoxyCodeLine{148     rapido\_address\_id\_t next\_local\_address\_id;}
\DoxyCodeLine{149     set\_t addresses\_advertised;}
\DoxyCodeLine{150     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} remote\_addresses;}
\DoxyCodeLine{151     rapido\_address\_id\_t next\_remote\_address\_id;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} tls\_session\_ids;}
\DoxyCodeLine{154     \textcolor{keywordtype}{bool} is\_server;}
\DoxyCodeLine{155     \textcolor{keywordtype}{bool} is\_closed;}
\DoxyCodeLine{156 }
\DoxyCodeLine{157     \mbox{\hyperlink{structrapido__queue__t}{rapido\_queue\_t}} pending\_notifications;}
\DoxyCodeLine{158 }
\DoxyCodeLine{159     \textcolor{keyword}{union }\{}
\DoxyCodeLine{160         \textcolor{keyword}{struct }\{}
\DoxyCodeLine{161 }
\DoxyCodeLine{162         \} client;}
\DoxyCodeLine{163         \textcolor{keyword}{struct }\{}
\DoxyCodeLine{164             \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} listen\_sockets;}
\DoxyCodeLine{165             \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} pending\_connections;}
\DoxyCodeLine{166             \textcolor{keywordtype}{size\_t} tls\_session\_ids\_sent;}
\DoxyCodeLine{167         \} server;}
\DoxyCodeLine{168     \};}
\DoxyCodeLine{169 }
\DoxyCodeLine{170     \textcolor{keyword}{struct }\{}
\DoxyCodeLine{171         FILE *out;}
\DoxyCodeLine{172         uint64\_t reference\_time;}
\DoxyCodeLine{173     \} qlog;}
\DoxyCodeLine{174 \} \mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}};}
\DoxyCodeLine{175 }
\DoxyCodeLine{176 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{177     rapido\_connection\_id\_t connection\_id;}
\DoxyCodeLine{178     \textcolor{keywordtype}{int} socket;}
\DoxyCodeLine{179     rapido\_address\_id\_t local\_address\_id;}
\DoxyCodeLine{180     rapido\_address\_id\_t remote\_address\_id;}
\DoxyCodeLine{181 }
\DoxyCodeLine{182     set\_t attached\_streams;}
\DoxyCodeLine{183     \mbox{\hyperlink{structrapido__queue__t}{rapido\_queue\_t}} frame\_queue;}
\DoxyCodeLine{184 }
\DoxyCodeLine{185     \textcolor{keyword}{struct }st\_ptls\_traffic\_protection\_t *encryption\_ctx;}
\DoxyCodeLine{186     \textcolor{keyword}{struct }st\_ptls\_traffic\_protection\_t *decryption\_ctx;}
\DoxyCodeLine{187     \textcolor{keyword}{struct }st\_ptls\_traffic\_protection\_t *own\_decryption\_ctx; \textcolor{comment}{// Cryptographic material to decrypt the records we sent when}}
\DoxyCodeLine{188                                                              \textcolor{comment}{// retransmitting}}
\DoxyCodeLine{189     \textcolor{keyword}{struct }\{}
\DoxyCodeLine{190         ptls\_buffer\_t rec;}
\DoxyCodeLine{191         ptls\_buffer\_t mess;}
\DoxyCodeLine{192     \} tls\_recvbuf;  \textcolor{comment}{// Used by picotls for reassembling fragmented TLS records}}
\DoxyCodeLine{193 }
\DoxyCodeLine{194     \mbox{\hyperlink{structrapido__buffer__t}{rapido\_buffer\_t}} receive\_buffer;}
\DoxyCodeLine{195     \textcolor{keywordtype}{bool} receive\_buffer\_fragmented;}
\DoxyCodeLine{196     \mbox{\hyperlink{structrapido__buffer__t}{rapido\_buffer\_t}} send\_buffer;}
\DoxyCodeLine{197 }
\DoxyCodeLine{198     \mbox{\hyperlink{structrapido__queue__t}{rapido\_queue\_t}} sent\_records;}
\DoxyCodeLine{199     \textcolor{keywordtype}{size\_t} sent\_offset;}
\DoxyCodeLine{200     uint64\_t last\_received\_record\_sequence;}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     \textcolor{keywordtype}{bool} require\_ack;}
\DoxyCodeLine{203     uint64\_t last\_receive\_time;}
\DoxyCodeLine{204     \textcolor{keywordtype}{size\_t} non\_ack\_eliciting\_count;}
\DoxyCodeLine{205 }
\DoxyCodeLine{206     set\_t retransmit\_connections;}
\DoxyCodeLine{207 }
\DoxyCodeLine{208     \textcolor{keyword}{struct }\{}
\DoxyCodeLine{209         uint64\_t bytes\_received;}
\DoxyCodeLine{210         uint64\_t bytes\_sent;}
\DoxyCodeLine{211     \} stats;}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     ptls\_t *tls;}
\DoxyCodeLine{214     \textcolor{keywordtype}{void} *app\_ptr;}
\DoxyCodeLine{215 \} \mbox{\hyperlink{structrapido__connection__t}{rapido\_connection\_t}};}
\DoxyCodeLine{216 }
\DoxyCodeLine{217 \textcolor{preprocessor}{\#define rapido\_time\_to\_send(conn\_info, bytes\_len) ((((((uint64\_t) bytes\_len) * 1000000ul) / (conn\_info).congestion\_window) * (conn\_info).smoothed\_rtt) / 1000000ul)}}
\DoxyCodeLine{218 \textcolor{preprocessor}{\#define rapido\_time\_to\_drain(conn\_info) (rapido\_time\_to\_send(conn\_info, (conn\_info).bytes\_queued\_for\_sending))}}
\DoxyCodeLine{219 \textcolor{preprocessor}{\#define rapido\_time\_to\_transfer(conn\_info, bytes\_len) (rapido\_time\_to\_drain(conn\_info) + rapido\_time\_to\_send(conn\_info, bytes\_len) + (conn\_info).smoothed\_rtt)}}
\DoxyCodeLine{220 }
\DoxyCodeLine{221 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{222     uint64\_t smoothed\_rtt;}
\DoxyCodeLine{223     uint64\_t congestion\_window;}
\DoxyCodeLine{224     uint64\_t bytes\_queued\_for\_sending;}
\DoxyCodeLine{225 \} \mbox{\hyperlink{structrapido__connection__info__t}{rapido\_connection\_info\_t}};}
\DoxyCodeLine{226 }
\DoxyCodeLine{227 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{228     \textcolor{keywordtype}{int} socket;}
\DoxyCodeLine{229     ptls\_context\_t *tls\_ctx;}
\DoxyCodeLine{230     ptls\_t *tls;}
\DoxyCodeLine{231     ptls\_handshake\_properties\_t tls\_properties;}
\DoxyCodeLine{232     uint8\_t tls\_session\_id[TLS\_SESSION\_ID\_LEN];}
\DoxyCodeLine{233     rapido\_address\_id\_t local\_address\_id;}
\DoxyCodeLine{234 \} \mbox{\hyperlink{structrapido__pending__connection__t}{rapido\_pending\_connection\_t}};}
\DoxyCodeLine{235 }
\DoxyCodeLine{236 \textcolor{keyword}{typedef} uint8\_t *(*rapido\_stream\_producer\_t)(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *, rapido\_stream\_id\_t, \textcolor{keywordtype}{void} *, uint64\_t, \textcolor{keywordtype}{size\_t} *);}
\DoxyCodeLine{237 }
\DoxyCodeLine{238 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{239     uint64\_t offset;}
\DoxyCodeLine{240     \textcolor{keywordtype}{void} *app\_ctx;}
\DoxyCodeLine{241 \} \mbox{\hyperlink{structrapido__stream__write__cb__t}{rapido\_stream\_write\_cb\_t}};}
\DoxyCodeLine{242 }
\DoxyCodeLine{243 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{244     rapido\_stream\_id\_t stream\_id;}
\DoxyCodeLine{245 }
\DoxyCodeLine{246     set\_t connections;}
\DoxyCodeLine{247 }
\DoxyCodeLine{248     \mbox{\hyperlink{structrapido__range__buffer__t}{rapido\_range\_buffer\_t}} read\_buffer;}
\DoxyCodeLine{249     \textcolor{keywordtype}{size\_t} read\_fin;}
\DoxyCodeLine{250     \textcolor{keywordtype}{bool} fin\_received;}
\DoxyCodeLine{251 }
\DoxyCodeLine{252     \mbox{\hyperlink{structrapido__buffer__t}{rapido\_buffer\_t}} send\_buffer;}
\DoxyCodeLine{253     \textcolor{keywordtype}{size\_t} write\_offset;}
\DoxyCodeLine{254     \textcolor{keywordtype}{size\_t} write\_fin;}
\DoxyCodeLine{255     \textcolor{keywordtype}{bool} fin\_set;}
\DoxyCodeLine{256     \textcolor{keywordtype}{bool} fin\_sent;}
\DoxyCodeLine{257 }
\DoxyCodeLine{258     rapido\_stream\_producer\_t producer;}
\DoxyCodeLine{259     \textcolor{keywordtype}{void} *producer\_ctx;}
\DoxyCodeLine{260     \mbox{\hyperlink{structrapido__queue__t}{rapido\_queue\_t}} write\_callbacks;}
\DoxyCodeLine{261 }
\DoxyCodeLine{262     uint64\_t bytes\_received;}
\DoxyCodeLine{263     uint64\_t bytes\_sent;}
\DoxyCodeLine{264 \} \mbox{\hyperlink{structrapido__stream__t}{rapido\_stream\_t}};}
\DoxyCodeLine{265 }
\DoxyCodeLine{266 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{267     \textcolor{keyword}{enum} \{}
\DoxyCodeLine{268         rapido\_new\_connection,}
\DoxyCodeLine{269         rapido\_connection\_reset,}
\DoxyCodeLine{270         rapido\_connection\_closed,}
\DoxyCodeLine{271         rapido\_new\_stream,}
\DoxyCodeLine{272         rapido\_stream\_has\_data,}
\DoxyCodeLine{273         rapido\_stream\_data\_was\_written,}
\DoxyCodeLine{274         rapido\_stream\_closed,}
\DoxyCodeLine{275         rapido\_new\_remote\_address,}
\DoxyCodeLine{276         rapido\_session\_closed,}
\DoxyCodeLine{277     \} notification\_type;}
\DoxyCodeLine{278 }
\DoxyCodeLine{279     \textcolor{keyword}{union }\{}
\DoxyCodeLine{280         rapido\_connection\_id\_t connection\_id;}
\DoxyCodeLine{281         rapido\_stream\_id\_t stream\_id;}
\DoxyCodeLine{282         rapido\_address\_id\_t address\_id;}
\DoxyCodeLine{283         \textcolor{keywordtype}{void} *app\_ctx;}
\DoxyCodeLine{284     \};}
\DoxyCodeLine{285 \} \mbox{\hyperlink{structrapido__application__notification__t}{rapido\_application\_notification\_t}};}
\DoxyCodeLine{286 }
\DoxyCodeLine{288 \mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *\mbox{\hyperlink{rapido_8h_a3f4485e1a9b67bfb7653648f7f06d755}{rapido\_new\_server}}(ptls\_context\_t *tls\_ctx, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *server\_name, FILE *qlog\_out);}
\DoxyCodeLine{289 }
\DoxyCodeLine{291 rapido\_address\_id\_t \mbox{\hyperlink{rapido_8h_ac39f3a98a444946477db9efdd6b691fa}{rapido\_add\_server\_address}}(\mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *server, \textcolor{keyword}{struct} sockaddr *addr, socklen\_t addr\_len, \textcolor{keywordtype}{bool} add\_listen\_socket);}
\DoxyCodeLine{293 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a4155ac633d0aee949834359a3f575ba3}{rapido\_remove\_server\_address}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_address\_id\_t local\_address\_id);}
\DoxyCodeLine{295 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_ae54235d9f540c80a263be966b21b6e51}{rapido\_run\_server\_network}}(\mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *server, \textcolor{keywordtype}{int} timeout);}
\DoxyCodeLine{297 \mbox{\hyperlink{structrapido__application__notification__t}{rapido\_application\_notification\_t}} *\mbox{\hyperlink{rapido_8h_a51ecd063e04c0406be6931aa516a42d9}{rapido\_next\_server\_notification}}(\mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *server, \textcolor{keywordtype}{size\_t} *session\_index);}
\DoxyCodeLine{298 }
\DoxyCodeLine{300 \mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *\mbox{\hyperlink{rapido_8h_a7ba9cfad71b499651089ee58f6618e38}{rapido\_new\_session}}(ptls\_context\_t *tls\_ctx, \textcolor{keywordtype}{bool} is\_server, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *server\_name, FILE *qlog\_out);}
\DoxyCodeLine{301 }
\DoxyCodeLine{303 rapido\_address\_id\_t \mbox{\hyperlink{rapido_8h_a08294642b525b8b9b91c4e2887b8d9b1}{rapido\_add\_address}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, \textcolor{keyword}{struct} sockaddr *addr, socklen\_t addr\_len);}
\DoxyCodeLine{305 rapido\_address\_id\_t \mbox{\hyperlink{rapido_8h_a31c9dc330a7e5a13641115625c4f4c08}{rapido\_add\_remote\_address}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, \textcolor{keyword}{struct} sockaddr *addr, socklen\_t addr\_len);}
\DoxyCodeLine{307 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a5a3cc13755a239acdb67005a991bbeb1}{rapido\_remove\_address}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_address\_id\_t local\_address\_id);}
\DoxyCodeLine{308 }
\DoxyCodeLine{310 rapido\_connection\_id\_t \mbox{\hyperlink{rapido_8h_aa846f85e804f50d6c46ae2f88a20c05d}{rapido\_create\_connection}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, uint8\_t local\_address\_id, uint8\_t remote\_address\_id);}
\DoxyCodeLine{312 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a9a3c01f48e7a58dbbb6f459337183d81}{rapido\_run\_network}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, \textcolor{keywordtype}{int} timeout);}
\DoxyCodeLine{314 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a70fe1e38a89fe0596cfcf31fd17977be}{rapido\_retransmit\_connection}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id, set\_t connections);}
\DoxyCodeLine{316 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a55398b7699e88e8bd9eb0ebd8731c941}{rapido\_close\_connection}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id);}
\DoxyCodeLine{318 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_ad4254ecc5a7b990b1b224241a6298db3}{rapido\_close\_session}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id);}
\DoxyCodeLine{319 }
\DoxyCodeLine{321 rapido\_stream\_id\_t \mbox{\hyperlink{rapido_8h_ab91ebbeefc40218e30ce2838c8c35c20}{rapido\_open\_stream}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session);}
\DoxyCodeLine{323 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a78748359d3301081c8687a38d12274e3}{rapido\_attach\_stream}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id, rapido\_connection\_id\_t connection\_id);}
\DoxyCodeLine{325 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a8acb570dd973acd5d7115a7287d7534d}{rapido\_detach\_stream}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id, rapido\_connection\_id\_t connection\_id);}
\DoxyCodeLine{327 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a42cacfeabffd4f7399d6c1f4dc5c5399}{rapido\_add\_to\_stream}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len);}
\DoxyCodeLine{329 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a10869a2828fda08bb1d75f76b47db470}{rapido\_add\_to\_stream\_notify}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len, \textcolor{keywordtype}{void} *app\_ctx);}
\DoxyCodeLine{331 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_adeb03ea1301a09ba3b38f1cf014efa10}{rapido\_set\_stream\_producer}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id, rapido\_stream\_producer\_t producer,}
\DoxyCodeLine{332                                \textcolor{keywordtype}{void} *producer\_ctx);}
\DoxyCodeLine{334 \textcolor{keywordtype}{void} *\mbox{\hyperlink{rapido_8h_ac92eec246e0ca90a858dd304c685ede6}{rapido\_read\_stream}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id, \textcolor{keywordtype}{size\_t} *len);}
\DoxyCodeLine{336 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a09d20f0b82b3a09768a9752ed83d3316}{rapido\_close\_stream}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_stream\_id\_t stream\_id);}
\DoxyCodeLine{337 }
\DoxyCodeLine{339 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a627bbe1a59d547d6ffc71a25fd54fdfb}{rapido\_session\_accept\_new\_connection}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, \textcolor{keywordtype}{int} accept\_fd, rapido\_address\_id\_t local\_address\_id);}
\DoxyCodeLine{341 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_ae08a4c6e9d19031969ce4e151d12fabc}{rapido\_server\_accept\_new\_connection}}(\mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *server, \textcolor{keywordtype}{int} accept\_fd, rapido\_address\_id\_t local\_address\_id);}
\DoxyCodeLine{343 \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{rapido_8h_afe295e4b2470b0d5c604ef93ffbb03ed}{rapido\_server\_add\_new\_connection}}(\mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} *pending\_connections, ptls\_context\_t *tls\_ctx, ptls\_t *tls,}
\DoxyCodeLine{344                                      \textcolor{keyword}{const} \textcolor{keywordtype}{char} *server\_name, \textcolor{keywordtype}{int} conn\_fd, rapido\_address\_id\_t local\_address\_id);}
\DoxyCodeLine{346 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_ac3dfd5adecd89b0239c7a935fd862752}{rapido\_client\_process\_handshake}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id, uint8\_t *buffer, \textcolor{keywordtype}{size\_t} *len);}
\DoxyCodeLine{348 \textcolor{keywordtype}{void} \mbox{\hyperlink{rapido_8h_aab3f281b7d966cd3f7dce118ed10653c}{rapido\_server\_process\_handshake}}(\mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *server, \mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, \mbox{\hyperlink{structrapido__array__t}{rapido\_array\_t}} *pending\_connections, \textcolor{keywordtype}{size\_t} pending\_connection\_index, uint8\_t *buffer, \textcolor{keywordtype}{size\_t} *len, ptls\_buffer\_t *handshake\_buffer, \mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} **created\_session, \mbox{\hyperlink{structrapido__connection__t}{rapido\_connection\_t}} **created\_connection);}
\DoxyCodeLine{350 \textcolor{keywordtype}{void} \mbox{\hyperlink{rapido_8h_a003f0c9b6c8bcbab5f52b43c950523d3}{rapido\_process\_incoming\_data}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id, uint64\_t current\_time, uint8\_t *buffer, \textcolor{keywordtype}{size\_t} *len);}
\DoxyCodeLine{352 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_ace8532bf0784fea7316bd35e4e08ab11}{rapido\_connection\_wants\_to\_send}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, \mbox{\hyperlink{structrapido__connection__t}{rapido\_connection\_t}} *connection, uint64\_t current\_time, \textcolor{keywordtype}{bool} *is\_blocked);}
\DoxyCodeLine{354 \textcolor{keywordtype}{void} \mbox{\hyperlink{rapido_8h_a963ea98e0acad055648feecdd66224f3}{rapido\_prepare\_data}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id, uint64\_t current\_time, uint8\_t *buffer, \textcolor{keywordtype}{size\_t} *len);}
\DoxyCodeLine{356 \textcolor{keywordtype}{void} \mbox{\hyperlink{rapido_8h_ab8616f46e78fa1e773935c496eb437f0}{rapido\_connection\_set\_app\_ptr}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id, \textcolor{keywordtype}{void} *app\_ptr);}
\DoxyCodeLine{358 \textcolor{keywordtype}{void} *\mbox{\hyperlink{rapido_8h_acca4eb1c25a65c7ad820176bf588b8ce}{rapido\_connection\_get\_app\_ptr}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session, rapido\_connection\_id\_t connection\_id);}
\DoxyCodeLine{360 \textcolor{keywordtype}{void} \mbox{\hyperlink{rapido_8h_a90ed18fc8d5ba0c4582bf504f3f0ef34}{rapido\_connection\_get\_info}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} * session, rapido\_connection\_id\_t connection\_id, \mbox{\hyperlink{structrapido__connection__info__t}{rapido\_connection\_info\_t}} *info);}
\DoxyCodeLine{361 }
\DoxyCodeLine{363 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_ac96ddce737182da7ba9bb1db89bc38b1}{rapido\_session\_free}}(\mbox{\hyperlink{structrapido__session__t}{rapido\_session\_t}} *session);}
\DoxyCodeLine{365 \textcolor{keywordtype}{int} \mbox{\hyperlink{rapido_8h_a9407224c78fd5ef6519919297ca1e24c}{rapido\_server\_free}}(\mbox{\hyperlink{structrapido__server__t}{rapido\_server\_t}} *server);}
\DoxyCodeLine{366 }
\DoxyCodeLine{367 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
